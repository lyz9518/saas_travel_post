<h2>All Posts</h2>

<div class="row">
  <div class="col-lg-12 col-md-12 col-sm-12">
    <%= form_tag posts_path, method: :get do %>
      <%= label_tag :search_by_title %>
      <%= text_field_tag :search_by_title, params[:search_by_title] %>
      <%= label_tag :search_by_zipcode %>
      <%= text_field_tag :search_by_zipcode, params[:search_by_zipcode] %>
      <%= label_tag :sort_by_rating %>
      <%= check_box_tag :sort_by_rating, 1, @sort_by_rating_checked, :data => {:toggle => "toggle", :onstyle => "primary", :offstyle => "danger"} %>
      <%= submit_tag "Search", class: 'btn btn-primary'%>
    <% end %>
  <div>
</div>

<%= link_to 'Add new post', new_post_path, class: 'btn btn-primary' %>

<br>

<div class="row">
  <% @all_posts.each do |post| %>
    <div class="col-4">
      <div class="index-pad">
        <div class="row"> 
          <div class="col-12">
            <% if post.image.present?%>
              <%= image_tag post.image.url, :style => "width: 100%;" %>
            <% else %>
              <% puts post%>
              <%= image_tag 'default.jpg', :style => "width: 100%;" %>
            <% end %>
          </div>
        </div>
        <div class="index-content">
          <div class="row">
            <div class="col-12">  
              <%= link_to "#{post.title}", post_path(post), :class => "index-title" %>
            </div>
          </div>
          <div class="row index-detail">
            <div class="col-6">
              Post ID:
            </div>
            <div class="col-6">
              <%= post.id %>
            </div>
          </div>
          <div class="row index-detail">
            <div class="col-6">
              Creator ID:
            </div>
            <div class="col-6">
              <%= link_to post.creator_id, user_path(post.creator_id) %>
            </div>
          </div>
          <div class="row index-detail">
            <div class="col-6">
              Post Zip:
            </div>
            <div class="col-6">
              <%= post.zipcode %>
            </div>
          </div>
          <div class="row index-detail">
            <div class="col-6">
              Rating:
            </div>
            <div class="col-6">
              <%= post.rating %>
            </div>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<!--
<table class="table table-striped col-md-12" id="posts">
  <thead>
    <tr>
      <th>Title</th>
      <th>Post ID</th>
      <th>Creator ID</th>
      <th>Zipcode</th>
    </tr>
  </thead>
  <tbody>
    <% @all_posts.each do |post| %>
      <tr>
        <td>
          <%= link_to "#{post.title}", post_path(post) %>
        </td>
        <td>
          <%= post.id %>
        </td>
        <td>
          <%= post.creator_id %>
        </td>
        <td>
          <%= post.zipcode %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
-->
